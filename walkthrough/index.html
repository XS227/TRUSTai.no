<!doctype html>
<html lang="nb">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TrustAi | Landingsside</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app-layout">
      <aside class="sidebar">
        <div class="brand">TrustAi</div>
        <nav class="main-nav">
          <a href="index.html" class="active" data-i18n="navLogin">Innlogging / Onboarding</a>
          <a href="ambassador.html" class="auth-only" data-i18n="navAmbassador">Ambassad√∏r-dashboard</a>
          <a href="admin.html" class="auth-only" data-i18n="navAdmin">Superadmin panel</a>
          <a href="profile.html" class="auth-only" data-i18n="navProfile">Min profil</a>
          <a href="flow-system.html" class="auth-only" data-i18n="navFlow">System flow</a>
        </nav>
      </aside>
      <div class="content">
        <header class="topbar">
          <div class="topbar-left">
            <button id="navToggle" class="nav-toggle btn-secondary" aria-expanded="false">‚ò∞</button>
            <h1>TrustAi Leads</h1>
          </div>
          <div class="topbar-actions">
            <button id="themeToggle" class="btn-icon btn-secondary" title="Toggle dark/light">üåô</button>
            <button id="languageToggle" class="btn-icon btn-secondary" title="Switch language">üá¨üáß</button>
            <button id="authAction" class="btn-secondary">Log out</button>
            <img id="topbarAvatar" class="avatar" src="" alt="Profile" />
          </div>
        </header>

        <main class="page">
          <section class="panel hero-panel hero-split">
            <div>
              <p class="eyebrow">Welcome</p>
              <h2>TrustAi Leads hjelper ambassad√∏rer med forutsigbar vekst</h2>
              <p>
                Alt er samlet p√• ett sted: registrer leads, f√∏lg status i sanntid og se provisjon tydelig.
                Bygget for rask onboarding og smidig salgsoppf√∏lging.
              </p>
              <div class="row-actions" style="justify-content:flex-start;">
                <button id="openDemoAdminModal" class="btn-secondary">Se demo</button>
              </div>
            </div>
            <article class="kpi-card premium-card">
              <h3>Bli ambassad√∏r</h3>
              <p class="muted">Velg innloggingsmetode og f√• tilgang til ambassad√∏r-arbeidsflaten med en gang.</p>
              <div class="form-grid">
                <button id="loginGoogle" class="btn-primary">Fortsett med Google</button>
                <form id="registerForm" class="form-grid premium-form">
                  <label>Fullt navn<input name="fullName" placeholder="E.g. Nora Hansen" required /></label>
                  <label>E-post<input name="email" type="email" placeholder="deg@firma.no" required /></label>
                  <label>Telefon<input name="phone" placeholder="+47 ..." /></label>
                  <button class="btn-secondary" type="submit">Opprett konto med e-post</button>
                </form>
                <p id="authMessage" class="muted" aria-live="polite"></p>
                <p id="registerMessage" class="muted" aria-live="polite"></p>
              </div>
            </article>
          </section>

          <section id="be-om-pris" class="panel contact-section">
            <div class="contact-intro">
              <h2>Be om tilbud p√• animasjonsfilm</h2>
              <p>Del noen detaljer, s√• sender teamet v√•rt et uforpliktende tilbud.</p>
            </div>

            <form id="priceForm" class="contact-form">
              <input type="text" id="companyName" placeholder="Firmanavn" required />
              <input type="text" id="contactName" placeholder="Kontaktperson" required />
              <input type="email" id="email" placeholder="E-post" required />
              <input type="tel" id="phone" placeholder="Telefon" />

              <select id="filmType">
                <option value="">Hva skal filmen brukes til?</option>
                <option value="advertising">Reklame</option>
                <option value="training">Oppl√¶ring</option>
                <option value="explainer">Forklaringsvideo</option>
                <option value="other">Annet</option>
              </select>

              <textarea id="description" placeholder="Kort prosjektbeskrivelse..." rows="4"></textarea>

              <button type="submit" class="btn-primary contact-submit">
                Send foresp√∏rsel
              </button>

              <p id="formMessage" class="muted"></p>
            </form>
          </section>

          <section class="panel">
            <h2>Hvordan kan ambassad√∏rer tjene med dette systemet?</h2>
            <p>
              Typiske pakker ligger mellom <strong>40 000 og 200 000 kr</strong>. Med <strong>4‚Äì10 salg per m√•ned</strong>
              kan en aktiv ambassad√∏r bygge en stabil m√•nedlig inntekt.
            </p>
            <div class="grid">
              <article class="kpi-card">
                <p class="muted">Pakkeverdi</p>
                <p class="kpi">40k‚Äì200k</p>
              </article>
              <article class="kpi-card">
                <p class="muted">Salg / mnd</p>
                <p class="kpi">4‚Äì10</p>
              </article>
              <article class="kpi-card">
                <p class="muted">Potensiell omsetning / mnd</p>
                <p class="kpi">160k‚Äì2M</p>
              </article>
            </div>
            <div class="earnings-chart" aria-label="Income potential">
              <div class="earnings-bar" style="--bar-height: 34%;"><span>4 sales</span></div>
              <div class="earnings-bar" style="--bar-height: 58%;"><span>6 sales</span></div>
              <div class="earnings-bar" style="--bar-height: 76%;"><span>8 sales</span></div>
              <div class="earnings-bar" style="--bar-height: 100%;"><span>10 sales</span></div>
            </div>
          </section>

          <section class="panel">
            <h2>FAQ</h2>
            <div class="faq-list">
              <details>
                <summary>M√• jeg ha teknisk erfaring for √• bruke TrustAi Leads?</summary>
                <p>Nei. Plattformen er laget for √• v√¶re enkel, med tydelige dashboards og guider.</p>
              </details>
              <details>
                <summary>Hvilken innloggingsmetode b√∏r jeg velge?</summary>
                <p>Google er raskest, men du kan ogs√• opprette konto med e-post i onboarding.</p>
              </details>
              <details>
                <summary>Hva skjer etter innlogging?</summary>
                <p>Demo-innhold skjules, og du sendes direkte til ambassad√∏r-dashboardet.</p>
              </details>
            </div>
          </section>
        </main>
        <footer class="site-footer">¬© Delivered by Setai.no</footer>
      </div>
    </div>

    <div id="demoAdminModal" class="modal-backdrop">
      <div class="modal">
        <h2>Demo-superadmin for investorpresentasjon</h2>
        <p class="muted">Logg inn med demo-bruker for √• se superadmin-oppsettet.</p>
        <form id="demoAdminLoginForm" class="form-grid">
          <label>Brukernavn<input name="username" autocomplete="username" required /></label>
          <label>Passord<input name="password" type="password" autocomplete="current-password" required /></label>
          <div class="row-actions">
            <button type="button" id="closeDemoAdminModal" class="btn-secondary">Lukk</button>
            <button type="submit" class="btn-primary">Logg inn som demo-superadmin</button>
          </div>
          <p id="demoAdminMessage" class="muted" aria-live="polite"></p>
        </form>
      </div>
    </div>
    <script type="module" src="app.js"></script>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
      import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyA9ESuWhXXsevI47cY_A0YijhAawC7s0Zs",
        authDomain: "trustai-4dc55.firebaseapp.com",
        projectId: "trustai-4dc55",
        storageBucket: "trustai-4dc55.firebasestorage.app",
        messagingSenderId: "886529188680",
        appId: "1:886529188680:web:f8008930a08db98fba497d",
        measurementId: "G-CL1RB3P1CC"
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Cookie helper
      function getCookie(name) {
        const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
        return match ? match[2] : null;
      }

      document.getElementById("priceForm").addEventListener("submit", async (e) => {
        e.preventDefault();

        const messageBox = document.getElementById("formMessage");
        messageBox.textContent = "Sender...";

        try {
          const ambassadorId = getCookie("ambassadorRef");

          await addDoc(collection(db, "leads"), {
            companyName: document.getElementById("companyName").value,
            contactName: document.getElementById("contactName").value,
            email: document.getElementById("email").value,
            phone: document.getElementById("phone").value || null,
            filmType: document.getElementById("filmType").value || null,
            description: document.getElementById("description").value || null,

            ambassadorId: ambassadorId || null,
            status: "open",
            commissionPercent: 0,
            commissionAmount: 0,

            source: "website",
            landingPage: "be-om-pris",

            createdAt: serverTimestamp(),
            updatedAt: serverTimestamp()
          });

          messageBox.style.color = "green";
          messageBox.textContent = "Takk! Vi kontakter deg snart.";

          document.getElementById("priceForm").reset();

        } catch (error) {
          console.error(error);
          messageBox.style.color = "red";
          messageBox.textContent = "Something went wrong. Please try again.";
        }
      });
    </script>
  </body>
</html>
