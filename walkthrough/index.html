<!doctype html>
<html lang="nb">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Animer | Landing</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app-layout">
      <aside class="sidebar">
        <div class="brand">Animer</div>
        <nav class="main-nav">
          <a href="index.html" class="active" data-i18n="navLogin">Login / Onboarding</a>
          <a href="ambassador.html" class="auth-only" data-i18n="navAmbassador">Ambassad√∏rdashboard</a>
          <a href="admin.html" class="auth-only" data-i18n="navAdmin">Admin-panel</a>
          <a href="profile.html" class="auth-only" data-i18n="navProfile">Min profil</a>
          <a href="flow-system.html" class="auth-only" data-i18n="navFlow">Systemflyt</a>
        </nav>
      </aside>
      <div class="content">
        <header class="topbar">
          <div class="topbar-left">
            <button id="navToggle" class="nav-toggle btn-secondary" aria-expanded="false">‚ò∞</button>
            <h1>Animer Leads</h1>
          </div>
          <div class="topbar-actions">
            <button id="themeToggle" class="btn-icon btn-secondary" title="Bytt m√∏rk/lys">üåô</button>
            <button id="languageToggle" class="btn-icon btn-secondary" title="Switch language">üá¨üáß</button>
            <button id="authAction" class="btn-secondary">Logg ut</button>
            <img id="topbarAvatar" class="avatar" src="" alt="Profil" />
          </div>
        </header>

        <main class="page">
          <section class="panel hero-panel hero-split">
            <div>
              <p class="eyebrow">Velkommen</p>
              <h2>Animer Leads er din ambassad√∏rmotor for vekst</h2>
              <p>
                P√• √©n plass kan ambassad√∏rer dele leads, f√∏lge status i sanntid og f√• tydelig oversikt over opptjening.
                Plattformen er laget for enkel onboarding og raske salgsl√∏p.
              </p>
              <div class="row-actions" style="justify-content:flex-start;">
                <button id="openDemoAdminModal" class="btn-secondary">Se demo</button>
              </div>
            </div>
            <article class="kpi-card premium-card">
              <h3>Bli ambassad√∏r</h3>
              <p class="muted">Velg innlogging og kom rett inn i din ambassad√∏rside med ekte data.</p>
              <div class="form-grid">
                <button id="loginGoogle" class="btn-primary">Fortsett med Google</button>
                <form id="registerForm" class="form-grid premium-form">
                  <label>Fullt navn<input name="fullName" placeholder="Eks. Nora Hansen" required /></label>
                  <label>E-post<input name="email" type="email" placeholder="deg@firma.no" required /></label>
                  <label>Telefon<input name="phone" placeholder="+47 ..." /></label>
                  <button class="btn-secondary" type="submit">Bli ambassad√∏r med e-post</button>
                </form>
                <p id="authMessage" class="muted" aria-live="polite"></p>
                <p id="registerMessage" class="muted" aria-live="polite"></p>
              </div>
            </article>
          </section>

          <section id="be-om-pris" style="padding:60px 20px; max-width:700px; margin:auto;">
            <h2>Be om pris p√• animasjonsfilm</h2>
            <p>Fortell oss litt om prosjektet ditt, s√• sender vi deg et uforpliktende tilbud.</p>

            <form id="priceForm" style="display:flex; flex-direction:column; gap:15px;">
              <input type="text" id="companyName" placeholder="Firmanavn" required />
              <input type="text" id="contactName" placeholder="Kontaktperson" required />
              <input type="email" id="email" placeholder="E-post" required />
              <input type="tel" id="phone" placeholder="Telefon" />

              <select id="filmType">
                <option value="">Hva skal filmen brukes til?</option>
                <option value="reklame">Reklame</option>
                <option value="oppl√¶ring">Oppl√¶ring</option>
                <option value="forklaringsfilm">Forklaringsfilm</option>
                <option value="annet">Annet</option>
              </select>

              <textarea id="description" placeholder="Beskriv prosjektet kort..." rows="4"></textarea>

              <button type="submit" style="padding:12px; background:black; color:white; border:none; cursor:pointer;">
                Send foresp√∏rsel
              </button>

              <p id="formMessage" style="margin-top:10px;"></p>
            </form>
          </section>

          <section class="panel">
            <h2>Hvordan kan man tjene penger med systemet?</h2>
            <p>
              Typiske pakker ligger mellom <strong>40 000 kr og 200 000 kr</strong>. Med <strong>4‚Äì10 salg per m√•ned</strong>
              kan en aktiv ambassad√∏r bygge en stabil inntektsstr√∏m.
            </p>
            <div class="grid">
              <article class="kpi-card">
                <p class="muted">Pakkeverdi</p>
                <p class="kpi">40k‚Äì200k</p>
              </article>
              <article class="kpi-card">
                <p class="muted">Salg / mnd</p>
                <p class="kpi">4‚Äì10</p>
              </article>
              <article class="kpi-card">
                <p class="muted">Potensiell omsetning / mnd</p>
                <p class="kpi">160k‚Äì2M</p>
              </article>
            </div>
            <div class="earnings-chart" aria-label="Inntektspotensial">
              <div class="earnings-bar" style="--bar-height: 34%;"><span>4 salg</span></div>
              <div class="earnings-bar" style="--bar-height: 58%;"><span>6 salg</span></div>
              <div class="earnings-bar" style="--bar-height: 76%;"><span>8 salg</span></div>
              <div class="earnings-bar" style="--bar-height: 100%;"><span>10 salg</span></div>
            </div>
          </section>

          <section class="panel">
            <h2>FAQ</h2>
            <div class="faq-list">
              <details>
                <summary>M√• jeg ha teknisk erfaring for √• bruke Animer Leads?</summary>
                <p>Nei. Systemet er laget for enkel bruk med tydelig dashboard og stegvis flyt.</p>
              </details>
              <details>
                <summary>Hvilken innlogging b√∏r jeg velge?</summary>
                <p>Google er raskest, men du kan ogs√• bli ambassad√∏r med e-post under onboarding.</p>
              </details>
              <details>
                <summary>Hva skjer etter innlogging?</summary>
                <p>Demo-innhold skjules, og du sendes direkte til din ambassad√∏rside.</p>
              </details>
            </div>
          </section>
        </main>
        <footer class="site-footer">¬© Levert av Setai.no</footer>
      </div>
    </div>

    <div id="demoAdminModal" class="modal-backdrop">
      <div class="modal">
        <h2>Demo admin for investorpresentasjon</h2>
        <p class="muted">Logg inn med demo-bruker for √• se SuperAdmin-oppsettet.</p>
        <form id="demoAdminLoginForm" class="form-grid">
          <label>Brukernavn<input name="username" autocomplete="username" required /></label>
          <label>Passord<input name="password" type="password" autocomplete="current-password" required /></label>
          <div class="row-actions">
            <button type="button" id="closeDemoAdminModal" class="btn-secondary">Lukk</button>
            <button type="submit" class="btn-primary">Logg inn som demo admin</button>
          </div>
          <p id="demoAdminMessage" class="muted" aria-live="polite"></p>
        </form>
      </div>
    </div>
    <script type="module" src="app.js"></script>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
      import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "DIN_API_KEY",
        authDomain: "DIN_AUTH_DOMAIN",
        projectId: "DIN_PROJECT_ID",
        storageBucket: "DIN_BUCKET",
        messagingSenderId: "DIN_SENDER_ID",
        appId: "DIN_APP_ID"
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Cookie helper
      function getCookie(name) {
        const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
        return match ? match[2] : null;
      }

      document.getElementById("priceForm").addEventListener("submit", async (e) => {
        e.preventDefault();

        const messageBox = document.getElementById("formMessage");
        messageBox.textContent = "Sender...";

        try {
          const ambassadorId = getCookie("ambassadorRef");

          await addDoc(collection(db, "leads"), {
            companyName: document.getElementById("companyName").value,
            contactName: document.getElementById("contactName").value,
            email: document.getElementById("email").value,
            phone: document.getElementById("phone").value || null,
            filmType: document.getElementById("filmType").value || null,
            description: document.getElementById("description").value || null,

            ambassadorId: ambassadorId || null,
            status: "open",
            commissionPercent: 0,
            commissionAmount: 0,

            source: "website",
            landingPage: "be-om-pris",

            createdAt: serverTimestamp(),
            updatedAt: serverTimestamp()
          });

          messageBox.style.color = "green";
          messageBox.textContent = "Takk! Vi tar kontakt med deg snart.";

          document.getElementById("priceForm").reset();

        } catch (error) {
          console.error(error);
          messageBox.style.color = "red";
          messageBox.textContent = "Noe gikk galt. Pr√∏v igjen.";
        }
      });
    </script>
  </body>
</html>
