<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Animer | Landing</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app-layout">
      <aside class="sidebar">
        <div class="brand">Animer</div>
        <nav class="main-nav">
          <a href="index.html" class="active" data-i18n="navLogin">Login / Onboarding</a>
          <a href="ambassador.html" class="auth-only" data-i18n="navAmbassador">Ambassador dashboard</a>
          <a href="admin.html" class="auth-only" data-i18n="navAdmin">Superadmin panel</a>
          <a href="profile.html" class="auth-only" data-i18n="navProfile">My profile</a>
          <a href="flow-system.html" class="auth-only" data-i18n="navFlow">System flow</a>
        </nav>
      </aside>
      <div class="content">
        <header class="topbar">
          <div class="topbar-left">
            <button id="navToggle" class="nav-toggle btn-secondary" aria-expanded="false">â˜°</button>
            <h1>Animer Leads</h1>
          </div>
          <div class="topbar-actions">
            <button id="themeToggle" class="btn-icon btn-secondary" title="Toggle dark/light">ðŸŒ™</button>
            <button id="languageToggle" class="btn-icon btn-secondary" title="Switch language">ðŸ‡¬ðŸ‡§</button>
            <button id="authAction" class="btn-secondary">Log out</button>
            <img id="topbarAvatar" class="avatar" src="" alt="Profile" />
          </div>
        </header>

        <main class="page">
          <section class="panel hero-panel hero-split">
            <div>
              <p class="eyebrow">Welcome</p>
              <h2>Animer Leads helps ambassadors generate predictable growth</h2>
              <p>
                Everything is in one place: submit leads, track status in real time, and follow commission clearly.
                Built for fast onboarding and smooth sales handoff.
              </p>
              <div class="row-actions" style="justify-content:flex-start;">
                <button id="openDemoAdminModal" class="btn-secondary">View demo</button>
              </div>
            </div>
            <article class="kpi-card premium-card">
              <h3>Become an ambassador</h3>
              <p class="muted">Choose a sign-in option and access your ambassador workspace right away.</p>
              <div class="form-grid">
                <button id="loginGoogle" class="btn-primary">Continue with Google</button>
                <form id="registerForm" class="form-grid premium-form">
                  <label>Full name<input name="fullName" placeholder="E.g. Nora Hansen" required /></label>
                  <label>Email<input name="email" type="email" placeholder="deg@firma.no" required /></label>
                  <label>Phone<input name="phone" placeholder="+47 ..." /></label>
                  <button class="btn-secondary" type="submit">Create account with email</button>
                </form>
                <p id="authMessage" class="muted" aria-live="polite"></p>
                <p id="registerMessage" class="muted" aria-live="polite"></p>
              </div>
            </article>
          </section>

          <section id="be-om-pris" class="panel contact-section">
            <div class="contact-intro">
              <h2>Request a quote for an animation film</h2>
              <p>Share a few details and our team will send you a no-obligation quote.</p>
            </div>

            <form id="priceForm" class="contact-form">
              <input type="text" id="companyName" placeholder="Company name" required />
              <input type="text" id="contactName" placeholder="Contact person" required />
              <input type="email" id="email" placeholder="Email" required />
              <input type="tel" id="phone" placeholder="Phone" />

              <select id="filmType">
                <option value="">What is the film for?</option>
                <option value="advertising">Advertising</option>
                <option value="training">Training</option>
                <option value="explainer">Explainer video</option>
                <option value="other">Other</option>
              </select>

              <textarea id="description" placeholder="Short project description..." rows="4"></textarea>

              <button type="submit" class="btn-primary contact-submit">
                Send request
              </button>

              <p id="formMessage" class="muted"></p>
            </form>
          </section>

          <section class="panel">
            <h2>How can ambassadors earn with this system?</h2>
            <p>
              Typical packages range from <strong>NOK 40,000 to NOK 200,000</strong>. With <strong>4â€“10 sales per month</strong>,
              an active ambassador can build a stable monthly income stream.
            </p>
            <div class="grid">
              <article class="kpi-card">
                <p class="muted">Package value</p>
                <p class="kpi">40kâ€“200k</p>
              </article>
              <article class="kpi-card">
                <p class="muted">Sales / month</p>
                <p class="kpi">4â€“10</p>
              </article>
              <article class="kpi-card">
                <p class="muted">Potential turnover / month</p>
                <p class="kpi">160kâ€“2M</p>
              </article>
            </div>
            <div class="earnings-chart" aria-label="Income potential">
              <div class="earnings-bar" style="--bar-height: 34%;"><span>4 sales</span></div>
              <div class="earnings-bar" style="--bar-height: 58%;"><span>6 sales</span></div>
              <div class="earnings-bar" style="--bar-height: 76%;"><span>8 sales</span></div>
              <div class="earnings-bar" style="--bar-height: 100%;"><span>10 sales</span></div>
            </div>
          </section>

          <section class="panel">
            <h2>FAQ</h2>
            <div class="faq-list">
              <details>
                <summary>Do I need technical experience to use Animer Leads?</summary>
                <p>No. The platform is designed to be simple, with clear dashboards and guided flows.</p>
              </details>
              <details>
                <summary>Which sign-in option should I choose?</summary>
                <p>Google is fastest, but you can also create an account with email during onboarding.</p>
              </details>
              <details>
                <summary>What happens after sign-in?</summary>
                <p>Demo content is hidden, and you are sent directly to your ambassador dashboard.</p>
              </details>
            </div>
          </section>
        </main>
        <footer class="site-footer">Â© Delivered by Setai.no</footer>
      </div>
    </div>

    <div id="demoAdminModal" class="modal-backdrop">
      <div class="modal">
        <h2>Demo superadmin for investor presentation</h2>
        <p class="muted">Sign in with demo credentials to view the Superadmin setup.</p>
        <form id="demoAdminLoginForm" class="form-grid">
          <label>Username<input name="username" autocomplete="username" required /></label>
          <label>Password<input name="password" type="password" autocomplete="current-password" required /></label>
          <div class="row-actions">
            <button type="button" id="closeDemoAdminModal" class="btn-secondary">Close</button>
            <button type="submit" class="btn-primary">Sign in as demo superadmin</button>
          </div>
          <p id="demoAdminMessage" class="muted" aria-live="polite"></p>
        </form>
      </div>
    </div>
    <script type="module" src="app.js"></script>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
      import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "DIN_API_KEY",
        authDomain: "DIN_AUTH_DOMAIN",
        projectId: "DIN_PROJECT_ID",
        storageBucket: "DIN_BUCKET",
        messagingSenderId: "DIN_SENDER_ID",
        appId: "DIN_APP_ID"
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Cookie helper
      function getCookie(name) {
        const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
        return match ? match[2] : null;
      }

      document.getElementById("priceForm").addEventListener("submit", async (e) => {
        e.preventDefault();

        const messageBox = document.getElementById("formMessage");
        messageBox.textContent = "Sending...";

        try {
          const ambassadorId = getCookie("ambassadorRef");

          await addDoc(collection(db, "leads"), {
            companyName: document.getElementById("companyName").value,
            contactName: document.getElementById("contactName").value,
            email: document.getElementById("email").value,
            phone: document.getElementById("phone").value || null,
            filmType: document.getElementById("filmType").value || null,
            description: document.getElementById("description").value || null,

            ambassadorId: ambassadorId || null,
            status: "open",
            commissionPercent: 0,
            commissionAmount: 0,

            source: "website",
            landingPage: "be-om-pris",

            createdAt: serverTimestamp(),
            updatedAt: serverTimestamp()
          });

          messageBox.style.color = "green";
          messageBox.textContent = "Thanks! We will contact you shortly.";

          document.getElementById("priceForm").reset();

        } catch (error) {
          console.error(error);
          messageBox.style.color = "red";
          messageBox.textContent = "Something went wrong. Please try again.";
        }
      });
    </script>
  </body>
</html>
